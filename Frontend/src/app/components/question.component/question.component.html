<!-- <div style="color: grey;" class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div *ngIf="loading" class="text-center">
        <p>Loading questions...</p>
      </div>

      <div *ngIf="!loading && currentQuestion" class="card">
        <div class="card-body">
          <h5 class="card-title">Question {{ currentQuestion.id }} of {{ questions.length }}</h5>
          <p class="card-text"><strong>{{ currentQuestion.question }}</strong></p>
          
          <div class="answer-box mt-4 p-3" style="background-color: #f0f0f0; border-radius: 5px;">
            <p><strong>Answer:</strong> {{ currentQuestion.answer }}</p>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <button 
              class="btn btn-primary" 
              (click)="prevQuestion()"
              [disabled]="currentIndex === 0">
              ‚Üê Previous
            </button>

            <span class="badge bg-info" style="height: fit-content;">
              {{ currentIndex + 1 }}/{{ questions.length }}
            </span>

            <button 
              class="btn btn-primary" 
              (click)="nextQuestion()"
              [disabled]="currentIndex === questions.length - 1">
              Next ‚Üí
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<!-- 
<div style="color: grey;" class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="mb-4">
        <label for="techSelector" class="form-label">Select Technology:</label>
        <select 
          id="techSelector" 
          class="form-select" 
          [(ngModel)]="selectedTechnology" 
          (change)="onTechnologyChange()"
          [disabled]="loading">
          
          <option *ngFor="let tech of availableTechnologies" [ngValue]="tech">
            {{ tech }}
          </option>
        </select>
      </div>
      <div *ngIf="loading" class="text-center">
        <p>Loading questions for {{ selectedTechnology }}...</p>
      </div>

      <div *ngIf="!loading && currentQuestion" class="card">
        <div class="card-body">
          <h5 class="card-title">
            {{ selectedTechnology }} Question {{ currentIndex + 1 }} of {{ questions.length }} 
          </h5>
          <p class="card-text"><strong>{{ currentQuestion.question }}</strong></p>
          
          </div>
      </div>
      
      <div *ngIf="!loading && !currentQuestion && selectedTechnology" class="alert alert-warning text-center">
        No questions found for the selected technology: <strong>{{ selectedTechnology }}</strong>.
      </div>
      
    </div>
  </div>
</div> -->

<!-- <div style="color: grey;" class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-8">

      <div class="mb-4">
        <label for="techSelector" class="form-label">Select Technology:</label>
        <select 
          id="techSelector" 
          class="form-select" 
          [(ngModel)]="selectedTechnology" 
          (change)="onTechnologyChange()"
          [disabled]="loading">
          
          <option *ngFor="let tech of availableTechnologies" [ngValue]="tech">
            {{ tech }}
          </option>
        </select>
      </div>
      <div *ngIf="loading" class="text-center">
        <p>Loading questions for {{ selectedTechnology }}...</p>
      </div>

      <div *ngIf="!loading && currentQuestion" class="card">
        <div class="card-body">
          <h5 class="card-title">
            {{ selectedTechnology }} Question {{ currentIndex + 1 }} of {{ questions.length }} 
          </h5>
          <p class="card-text"><strong>{{ currentQuestion.question }}</strong></p>
          
          <div class="answer-box mt-4 p-3" style="background-color: #f0f0f0; border-radius: 5px;">
            <p><strong>Answer:</strong> {{ currentQuestion.answer }}</p>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <button 
              class="btn btn-primary" 
              (click)="prevQuestion()"
              [disabled]="currentIndex === 0">
              ‚Üê Previous
            </button>

            <span class="badge bg-info" style="height: fit-content;">
              {{ currentIndex + 1 }}/{{ questions.length }}
            </span>

            <button 
              class="btn btn-primary" 
              (click)="nextQuestion()"
              [disabled]="currentIndex === questions.length - 1">
              Next ‚Üí
            </button>
          </div>
          </div> 
        </div>
      
      <div *ngIf="!loading && !currentQuestion && selectedTechnology" class="alert alert-warning text-center">
        No questions found for the selected technology: <strong>{{ selectedTechnology }}</strong>.
      </div>
      
    </div>
  </div>
</div> -->
<div class="questions-container">
  <div class="header">
    <div>
      <h1>üìö Questions by Technology</h1>
      <p class="user-info" *ngIf="userEmail">Logged in as: <strong>{{ userEmail }}</strong></p>
    </div>
    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>

  <div class="tech-selector">
    <label for="techSelect"><strong>Select Technology:</strong></label>
    <select id="techSelect" [(ngModel)]="selectedTechnology" (change)="onTechnologyChange()">
      <option value="">-- Choose a technology --</option>
      <option *ngFor="let tech of technologies" [value]="tech">{{ tech }}</option>
    </select>
  </div>

  <div *ngIf="error" class="error-message">‚ùå {{ error }}</div>

  <div *ngIf="loading" class="loading">Loading questions...</div>

  <div *ngIf="!loading && questions.length > 0" class="questions-list">
    <div *ngFor="let question of questions; let i = index" class="question-card">
      <h3>Q{{ question.id }}: {{ question.question }}</h3>
      <button class="toggle-answer" (click)="toggleAnswer(i)">
        {{ isAnswerExpanded(i) ? 'Hide Answer' : 'Show Answer' }}
      </button>
      <div *ngIf="isAnswerExpanded(i)" class="answer">
        <strong>Answer:</strong><br>
        {{ question.answer }}
      </div>
    </div>
  </div>

  <div *ngIf="!loading && selectedTechnology && questions.length === 0" class="no-questions">
    No questions found for {{ selectedTechnology }}
  </div>
</div>